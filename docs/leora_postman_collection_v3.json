{
  "info": {
    "name": "Leora API v3 - Full BACKEND_API.md Implementation",
    "description": "To'liq Postman collection - barcha modullar BACKEND_API.md spetsifikatsiyasiga muvofiq. Tasks, Goals, Habits to'liq implementatsiya qilingan.",
    "version": "3.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:9090/api/v1", "type": "string" },
    { "key": "accessToken", "value": "", "type": "string" },
    { "key": "refreshToken", "value": "", "type": "string" },
    { "key": "userId", "value": "", "type": "string" },
    { "key": "taskId", "value": "", "type": "string" },
    { "key": "checklistItemId", "value": "", "type": "string" },
    { "key": "goalId", "value": "", "type": "string" },
    { "key": "milestoneId", "value": "", "type": "string" },
    { "key": "habitId", "value": "", "type": "string" },
    { "key": "completionId", "value": "", "type": "string" },
    { "key": "focusSessionId", "value": "", "type": "string" },
    { "key": "accountId", "value": "", "type": "string" },
    { "key": "transactionId", "value": "", "type": "string" },
    { "key": "budgetId", "value": "", "type": "string" },
    { "key": "debtId", "value": "", "type": "string" },
    { "key": "notificationId", "value": "", "type": "string" },
    { "key": "widgetId", "value": "", "type": "string" },
    { "key": "subscriptionId", "value": "", "type": "string" },
    { "key": "planId", "value": "", "type": "string" }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      { "key": "token", "value": "{{accessToken}}", "type": "string" }
    ]
  },
  "item": [
    {
      "name": "1. Auth (Authentication)",
      "description": "Foydalanuvchi autentifikatsiyasi - register, login, logout",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data) {",
                  "  if (json.data.accessToken) pm.collectionVariables.set('accessToken', json.data.accessToken);",
                  "  if (json.data.refreshToken) pm.collectionVariables.set('refreshToken', json.data.refreshToken);",
                  "  if (json.data.user && json.data.user.id) pm.collectionVariables.set('userId', json.data.user.id);",
                  "  pm.test('Status code is 200', () => pm.response.to.have.status(200));",
                  "  pm.test('Access token returned', () => pm.expect(json.data.accessToken).to.not.be.empty);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@leora.uz\",\n  \"fullName\": \"Test User\",\n  \"password\": \"Test123456!\",\n  \"confirmPassword\": \"Test123456!\",\n  \"region\": \"UZ\",\n  \"currency\": \"UZS\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data) {",
                  "  if (json.data.accessToken) pm.collectionVariables.set('accessToken', json.data.accessToken);",
                  "  if (json.data.refreshToken) pm.collectionVariables.set('refreshToken', json.data.refreshToken);",
                  "  if (json.data.user && json.data.user.id) pm.collectionVariables.set('userId', json.data.user.id);",
                  "  pm.test('Login successful', () => pm.response.to.have.status(200));",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailOrUsername\": \"test@leora.uz\",\n  \"password\": \"Test123456!\",\n  \"rememberMe\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Get Me (Current User)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            }
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data) {",
                  "  if (json.data.accessToken) pm.collectionVariables.set('accessToken', json.data.accessToken);",
                  "  if (json.data.refreshToken) pm.collectionVariables.set('refreshToken', json.data.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "2. Tasks (Vazifalar) - Enhanced",
      "description": "Tasks moduli - 25+ fieldlar, filtering, sorting, checklist, dependencies",
      "item": [
        {
          "name": "List Tasks (with filters)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks?showStatus=active&status=inbox&priority=high&sortBy=dueDate&sortOrder=asc",
              "host": ["{{baseUrl}}"],
              "path": ["tasks"],
              "query": [
                { "key": "showStatus", "value": "active", "description": "active, archived, deleted" },
                { "key": "status", "value": "inbox", "description": "inbox, planned, in_progress, completed, canceled" },
                { "key": "priority", "value": "high", "description": "low, medium, high" },
                { "key": "sortBy", "value": "dueDate", "description": "dueDate, priority, createdAt" },
                { "key": "sortOrder", "value": "asc", "description": "asc, desc" }
              ]
            }
          }
        },
        {
          "name": "List Tasks (by Goal)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks?goalId={{goalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks"],
              "query": [
                { "key": "goalId", "value": "{{goalId}}" }
              ]
            }
          }
        },
        {
          "name": "List Tasks (by Date Range)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks?dueDateFrom=2025-01-01&dueDateTo=2025-01-31",
              "host": ["{{baseUrl}}"],
              "path": ["tasks"],
              "query": [
                { "key": "dueDateFrom", "value": "2025-01-01" },
                { "key": "dueDateTo", "value": "2025-01-31" }
              ]
            }
          }
        },
        {
          "name": "Search Tasks",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks?search=migration",
              "host": ["{{baseUrl}}"],
              "path": ["tasks"],
              "query": [
                { "key": "search", "value": "migration" }
              ]
            }
          }
        },
        {
          "name": "Create Task (Full)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('taskId', json.data.id);",
                  "  if (json.data.checklist && json.data.checklist.length > 0) {",
                  "    pm.collectionVariables.set('checklistItemId', json.data.checklist[0].id);",
                  "  }",
                  "  pm.test('Task created', () => pm.response.to.have.status(200));",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"PostgreSQL migration qilish\",\n  \"status\": \"inbox\",\n  \"showStatus\": \"active\",\n  \"priority\": \"high\",\n  \"dueDate\": \"2025-01-15\",\n  \"startDate\": \"2025-01-10\",\n  \"timeOfDay\": \"morning\",\n  \"estimatedMinutes\": 120,\n  \"energyLevel\": \"high\",\n  \"context\": \"work\",\n  \"notes\": \"Migration uchun muhim vazifa\",\n  \"checklist\": [\n    { \"title\": \"Schema design\", \"completed\": false },\n    { \"title\": \"Migration script\", \"completed\": false },\n    { \"title\": \"Testing\", \"completed\": false }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tasks",
              "host": ["{{baseUrl}}"],
              "path": ["tasks"]
            }
          }
        },
        {
          "name": "Create Task (Linked to Goal)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Goal bilan bog'liq vazifa\",\n  \"status\": \"inbox\",\n  \"priority\": \"medium\",\n  \"goalId\": \"{{goalId}}\",\n  \"progressValue\": 0,\n  \"progressUnit\": \"percent\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tasks",
              "host": ["{{baseUrl}}"],
              "path": ["tasks"]
            }
          }
        },
        {
          "name": "Get Task by ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}"]
            }
          }
        },
        {
          "name": "Update Task (PUT)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"PostgreSQL migration tugallandi\",\n  \"status\": \"completed\",\n  \"priority\": \"high\",\n  \"dueDate\": \"2025-01-15\",\n  \"notes\": \"Muvaffaqiyatli tugallandi!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}"]
            }
          }
        },
        {
          "name": "Update Task (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"in_progress\",\n  \"progressValue\": 50\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}"]
            }
          }
        },
        {
          "name": "Complete Task",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}", "complete"]
            }
          }
        },
        {
          "name": "Reopen Task",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}/reopen",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}", "reopen"]
            }
          }
        },
        {
          "name": "Update Checklist Item",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"completed\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}/checklist/{{checklistItemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}", "checklist", "{{checklistItemId}}"]
            }
          }
        },
        {
          "name": "Delete Task (Soft Delete)",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "3. Goals (Maqsadlar) - Enhanced",
      "description": "Goals moduli - 25+ fieldlar, milestones, check-ins, stats",
      "item": [
        {
          "name": "List All Goals",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/goals",
              "host": ["{{baseUrl}}"],
              "path": ["goals"]
            }
          }
        },
        {
          "name": "Create Goal (Full)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('goalId', json.data.id);",
                  "  if (json.data.milestones && json.data.milestones.length > 0) {",
                  "    pm.collectionVariables.set('milestoneId', json.data.milestones[0].id);",
                  "  }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Go dasturlashni o'rganish\",\n  \"description\": \"Go tilini professional darajada o'rganish\",\n  \"goalType\": \"education\",\n  \"status\": \"active\",\n  \"showStatus\": \"active\",\n  \"metricType\": \"numeric\",\n  \"direction\": \"increase\",\n  \"unit\": \"soat\",\n  \"initialValue\": 0,\n  \"targetValue\": 100,\n  \"currentValue\": 0,\n  \"startDate\": \"2025-01-01\",\n  \"targetDate\": \"2025-06-30\",\n  \"milestones\": [\n    { \"title\": \"Asosiy sintaksis\", \"targetPercent\": 25 },\n    { \"title\": \"Concurrency\", \"targetPercent\": 50 },\n    { \"title\": \"Web framework\", \"targetPercent\": 75 },\n    { \"title\": \"Production-ready\", \"targetPercent\": 100 }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/goals",
              "host": ["{{baseUrl}}"],
              "path": ["goals"]
            }
          }
        },
        {
          "name": "Create Financial Goal",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Mashina uchun pul yig'ish\",\n  \"description\": \"Yangi avtomobil sotib olish uchun jamg'arma\",\n  \"goalType\": \"finance\",\n  \"status\": \"active\",\n  \"metricType\": \"currency\",\n  \"direction\": \"increase\",\n  \"financeMode\": \"savings\",\n  \"currency\": \"USD\",\n  \"initialValue\": 0,\n  \"targetValue\": 15000,\n  \"currentValue\": 2500,\n  \"targetDate\": \"2026-12-31\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/goals",
              "host": ["{{baseUrl}}"],
              "path": ["goals"]
            }
          }
        },
        {
          "name": "Get Goal by ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/goals/{{goalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["goals", "{{goalId}}"]
            }
          }
        },
        {
          "name": "Update Goal Progress (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentValue\": 25,\n  \"progressPercent\": 25\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/goals/{{goalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["goals", "{{goalId}}"]
            }
          }
        },
        {
          "name": "Complete Goal",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/goals/{{goalId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": ["goals", "{{goalId}}", "complete"]
            }
          }
        },
        {
          "name": "Reactivate Goal",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/goals/{{goalId}}/reactivate",
              "host": ["{{baseUrl}}"],
              "path": ["goals", "{{goalId}}", "reactivate"]
            }
          }
        },
        {
          "name": "Create Goal Check-In",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"value\": 5,\n  \"note\": \"Bugun 5 soat o'qidim\",\n  \"sourceType\": \"manual\",\n  \"dateKey\": \"2025-01-04\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/goals/{{goalId}}/check-ins",
              "host": ["{{baseUrl}}"],
              "path": ["goals", "{{goalId}}", "check-ins"]
            }
          }
        },
        {
          "name": "Get Goal Check-Ins",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/goals/{{goalId}}/check-ins",
              "host": ["{{baseUrl}}"],
              "path": ["goals", "{{goalId}}", "check-ins"]
            }
          }
        },
        {
          "name": "Delete Goal",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/goals/{{goalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["goals", "{{goalId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "4. Habits (Odatlar) - Enhanced",
      "description": "Habits moduli - 25+ fieldlar, completions, finance rules, stats",
      "item": [
        {
          "name": "List All Habits",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/habits",
              "host": ["{{baseUrl}}"],
              "path": ["habits"]
            }
          }
        },
        {
          "name": "Create Habit (Daily Boolean)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('habitId', json.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Har kuni erta turish\",\n  \"description\": \"Soat 6:00 da uyg'onish\",\n  \"habitType\": \"health\",\n  \"status\": \"active\",\n  \"frequency\": \"daily\",\n  \"completionMode\": \"boolean\",\n  \"countingType\": \"create\",\n  \"difficulty\": \"medium\",\n  \"priority\": \"high\",\n  \"timeOfDay\": \"06:00\",\n  \"reminderEnabled\": true,\n  \"reminderTime\": \"05:45\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits",
              "host": ["{{baseUrl}}"],
              "path": ["habits"]
            }
          }
        },
        {
          "name": "Create Habit (Numeric Weekly)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Yugurish\",\n  \"description\": \"Haftada 3 marta 5 km yugurish\",\n  \"habitType\": \"health\",\n  \"status\": \"active\",\n  \"frequency\": \"weekly\",\n  \"daysOfWeek\": [1, 3, 5],\n  \"timesPerWeek\": 3,\n  \"completionMode\": \"numeric\",\n  \"targetPerDay\": 5,\n  \"unit\": \"km\",\n  \"countingType\": \"create\",\n  \"difficulty\": \"hard\",\n  \"priority\": \"high\",\n  \"challengeLengthDays\": 30,\n  \"linkedGoalIds\": [\"{{goalId}}\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits",
              "host": ["{{baseUrl}}"],
              "path": ["habits"]
            }
          }
        },
        {
          "name": "Create Habit (Finance - No Spend)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Fast food yemasliq\",\n  \"description\": \"Fast food kategoriyasida xarajat qilmaslik\",\n  \"habitType\": \"finance\",\n  \"status\": \"active\",\n  \"frequency\": \"daily\",\n  \"completionMode\": \"boolean\",\n  \"countingType\": \"quit\",\n  \"difficulty\": \"hard\",\n  \"priority\": \"high\",\n  \"financeRule\": {\n    \"type\": \"no_spend_in_categories\",\n    \"categoryIds\": [\"fast-food\", \"entertainment\"]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits",
              "host": ["{{baseUrl}}"],
              "path": ["habits"]
            }
          }
        },
        {
          "name": "Create Habit (Finance - Daily Limit)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Kunlik xarajat limiti\",\n  \"description\": \"Kuniga 100,000 so'mdan kam sarflash\",\n  \"habitType\": \"finance\",\n  \"status\": \"active\",\n  \"frequency\": \"daily\",\n  \"completionMode\": \"boolean\",\n  \"countingType\": \"quit\",\n  \"difficulty\": \"medium\",\n  \"priority\": \"high\",\n  \"financeRule\": {\n    \"type\": \"daily_spend_under\",\n    \"amount\": 100000,\n    \"currency\": \"UZS\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits",
              "host": ["{{baseUrl}}"],
              "path": ["habits"]
            }
          }
        },
        {
          "name": "Get Habit by ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}"]
            }
          }
        },
        {
          "name": "Update Habit (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"paused\",\n  \"reminderEnabled\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}"]
            }
          }
        },
        {
          "name": "Complete Habit (Boolean)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('completionId', json.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dateKey\": \"2025-01-04\",\n  \"status\": \"done\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}", "complete"]
            }
          }
        },
        {
          "name": "Complete Habit (Numeric)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dateKey\": \"2025-01-04\",\n  \"status\": \"done\",\n  \"value\": 5.5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}", "complete"]
            }
          }
        },
        {
          "name": "Mark Habit as Missed",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dateKey\": \"2025-01-03\",\n  \"status\": \"miss\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}", "complete"]
            }
          }
        },
        {
          "name": "Get Habit History",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}/history",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}", "history"]
            }
          }
        },
        {
          "name": "Get Habit Stats",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}", "stats"]
            }
          }
        },
        {
          "name": "Delete Habit",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/habits/{{habitId}}",
              "host": ["{{baseUrl}}"],
              "path": ["habits", "{{habitId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "5. Focus Sessions (Fokus Sessiyalari)",
      "description": "Focus moduli - Pomodoro style sessiyalar",
      "item": [
        {
          "name": "List All Focus Sessions",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/focus-sessions",
              "host": ["{{baseUrl}}"],
              "path": ["focus-sessions"]
            }
          }
        },
        {
          "name": "Start Focus Session (with Task)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('focusSessionId', json.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"taskId\": \"{{taskId}}\",\n  \"plannedMinutes\": 25,\n  \"status\": \"in_progress\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/focus-sessions",
              "host": ["{{baseUrl}}"],
              "path": ["focus-sessions"]
            }
          }
        },
        {
          "name": "Start Focus Session (with Goal)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"goalId\": \"{{goalId}}\",\n  \"plannedMinutes\": 50,\n  \"status\": \"in_progress\",\n  \"notes\": \"Go o'rganish sessiyasi\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/focus-sessions",
              "host": ["{{baseUrl}}"],
              "path": ["focus-sessions"]
            }
          }
        },
        {
          "name": "Get Focus Session by ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/focus-sessions/{{focusSessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["focus-sessions", "{{focusSessionId}}"]
            }
          }
        },
        {
          "name": "Complete Focus Session",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"completed\",\n  \"actualMinutes\": 25,\n  \"interruptionsCount\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/focus-sessions/{{focusSessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["focus-sessions", "{{focusSessionId}}"]
            }
          }
        },
        {
          "name": "Cancel Focus Session",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"canceled\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/focus-sessions/{{focusSessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["focus-sessions", "{{focusSessionId}}"]
            }
          }
        },
        {
          "name": "Delete Focus Session",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/focus-sessions/{{focusSessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["focus-sessions", "{{focusSessionId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "6. Finance (Moliya)",
      "description": "Finance moduli - Accounts, Transactions, Budgets, Debts",
      "item": [
        {
          "name": "Accounts",
          "item": [
            {
              "name": "List All Accounts",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/accounts",
                  "host": ["{{baseUrl}}"],
                  "path": ["accounts"]
                }
              }
            },
            {
              "name": "Create Account",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "const json = pm.response.json();",
                      "if (json && json.data && json.data.id) {",
                      "  pm.collectionVariables.set('accountId', json.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Asosiy hamyon\",\n  \"currency\": \"UZS\",\n  \"accountType\": \"cash\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/accounts",
                  "host": ["{{baseUrl}}"],
                  "path": ["accounts"]
                }
              }
            },
            {
              "name": "Get Account by ID",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/accounts/{{accountId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["accounts", "{{accountId}}"]
                }
              }
            },
            {
              "name": "Update Account",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Yangilangan hamyon\",\n  \"currency\": \"USD\",\n  \"accountType\": \"bank\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/accounts/{{accountId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["accounts", "{{accountId}}"]
                }
              }
            },
            {
              "name": "Delete Account",
              "request": {
                "method": "DELETE",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/accounts/{{accountId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["accounts", "{{accountId}}"]
                }
              }
            }
          ]
        },
        {
          "name": "Transactions",
          "item": [
            {
              "name": "List All Transactions",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/transactions",
                  "host": ["{{baseUrl}}"],
                  "path": ["transactions"]
                }
              }
            },
            {
              "name": "Create Transaction",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "const json = pm.response.json();",
                      "if (json && json.data && json.data.id) {",
                      "  pm.collectionVariables.set('transactionId', json.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"accountId\": \"{{accountId}}\",\n  \"amount\": 50000,\n  \"currency\": \"UZS\",\n  \"category\": \"food\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/transactions",
                  "host": ["{{baseUrl}}"],
                  "path": ["transactions"]
                }
              }
            },
            {
              "name": "Get Transaction by ID",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/transactions/{{transactionId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["transactions", "{{transactionId}}"]
                }
              }
            },
            {
              "name": "Update Transaction",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"amount\": 75000,\n  \"category\": \"transport\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/transactions/{{transactionId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["transactions", "{{transactionId}}"]
                }
              }
            },
            {
              "name": "Delete Transaction",
              "request": {
                "method": "DELETE",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/transactions/{{transactionId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["transactions", "{{transactionId}}"]
                }
              }
            }
          ]
        },
        {
          "name": "Budgets",
          "item": [
            {
              "name": "List All Budgets",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/budgets",
                  "host": ["{{baseUrl}}"],
                  "path": ["budgets"]
                }
              }
            },
            {
              "name": "Create Budget",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "const json = pm.response.json();",
                      "if (json && json.data && json.data.id) {",
                      "  pm.collectionVariables.set('budgetId', json.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Ovqatlanish byudjeti\",\n  \"currency\": \"UZS\",\n  \"limit\": 1000000\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/budgets",
                  "host": ["{{baseUrl}}"],
                  "path": ["budgets"]
                }
              }
            },
            {
              "name": "Get Budget by ID",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/budgets/{{budgetId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["budgets", "{{budgetId}}"]
                }
              }
            },
            {
              "name": "Update Budget",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"limit\": 1500000\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/budgets/{{budgetId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["budgets", "{{budgetId}}"]
                }
              }
            },
            {
              "name": "Delete Budget",
              "request": {
                "method": "DELETE",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/budgets/{{budgetId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["budgets", "{{budgetId}}"]
                }
              }
            }
          ]
        },
        {
          "name": "Debts",
          "item": [
            {
              "name": "List All Debts",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/debts",
                  "host": ["{{baseUrl}}"],
                  "path": ["debts"]
                }
              }
            },
            {
              "name": "Create Debt",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "const json = pm.response.json();",
                      "if (json && json.data && json.data.id) {",
                      "  pm.collectionVariables.set('debtId', json.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Kredit\",\n  \"balance\": 5000000\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/debts",
                  "host": ["{{baseUrl}}"],
                  "path": ["debts"]
                }
              }
            },
            {
              "name": "Get Debt by ID",
              "request": {
                "method": "GET",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/debts/{{debtId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["debts", "{{debtId}}"]
                }
              }
            },
            {
              "name": "Update Debt Balance",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{accessToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"balance\": 4500000\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/debts/{{debtId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["debts", "{{debtId}}"]
                }
              }
            },
            {
              "name": "Delete Debt",
              "request": {
                "method": "DELETE",
                "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
                "url": {
                  "raw": "{{baseUrl}}/debts/{{debtId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["debts", "{{debtId}}"]
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "7. Notifications",
      "item": [
        {
          "name": "List All Notifications",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/notifications",
              "host": ["{{baseUrl}}"],
              "path": ["notifications"]
            }
          }
        },
        {
          "name": "Create Notification",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('notificationId', json.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Eslatma\",\n  \"message\": \"Vazifangizni bajarishni unutmang!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications",
              "host": ["{{baseUrl}}"],
              "path": ["notifications"]
            }
          }
        },
        {
          "name": "Get Notification by ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/notifications/{{notificationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "{{notificationId}}"]
            }
          }
        },
        {
          "name": "Delete Notification",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/notifications/{{notificationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "{{notificationId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "8. Widgets",
      "item": [
        {
          "name": "List All Widgets",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/widgets",
              "host": ["{{baseUrl}}"],
              "path": ["widgets"]
            }
          }
        },
        {
          "name": "Create Widget",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('widgetId', json.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Kunlik xulosalar\",\n  \"config\": {\n    \"style\": \"compact\",\n    \"color\": \"blue\",\n    \"refreshInterval\": 60\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/widgets",
              "host": ["{{baseUrl}}"],
              "path": ["widgets"]
            }
          }
        },
        {
          "name": "Get Widget by ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/widgets/{{widgetId}}",
              "host": ["{{baseUrl}}"],
              "path": ["widgets", "{{widgetId}}"]
            }
          }
        },
        {
          "name": "Delete Widget",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/widgets/{{widgetId}}",
              "host": ["{{baseUrl}}"],
              "path": ["widgets", "{{widgetId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "9. Premium (Subscriptions)",
      "item": [
        {
          "name": "List All Plans",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/subscriptions/plans",
              "host": ["{{baseUrl}}"],
              "path": ["subscriptions", "plans"]
            }
          }
        },
        {
          "name": "Create Plan (Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('planId', json.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium\",\n  \"interval\": \"monthly\",\n  \"prices\": {\n    \"USD\": 9.99,\n    \"UZS\": 120000\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/subscriptions/plans",
              "host": ["{{baseUrl}}"],
              "path": ["subscriptions", "plans"]
            }
          }
        },
        {
          "name": "List My Subscriptions",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{accessToken}}" }],
            "url": {
              "raw": "{{baseUrl}}/subscriptions",
              "host": ["{{baseUrl}}"],
              "path": ["subscriptions"]
            }
          }
        },
        {
          "name": "Create Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.data && json.data.id) {",
                  "  pm.collectionVariables.set('subscriptionId', json.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tier\": \"premium\",\n  \"status\": \"active\",\n  \"cancelAtPeriodEnd\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/subscriptions",
              "host": ["{{baseUrl}}"],
              "path": ["subscriptions"]
            }
          }
        },
        {
          "name": "Cancel Subscription",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cancelAtPeriodEnd\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/subscriptions/{{subscriptionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["subscriptions", "{{subscriptionId}}"]
            }
          }
        }
      ]
    }
  ]
}
